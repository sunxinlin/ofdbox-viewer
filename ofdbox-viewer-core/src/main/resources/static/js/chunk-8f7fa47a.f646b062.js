(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8f7fa47a"],{"0fb7":function(e,t,o){},1631:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-card",{staticClass:"ofdbox-uploader"},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"类型"}},[o("el-radio-group",{model:{value:e.form.isFile,callback:function(t){e.$set(e.form,"isFile",t)},expression:"form.isFile"}},[o("el-radio",{attrs:{label:!0}},[e._v("文件")]),o("el-radio",{attrs:{label:!1}},[e._v("URL")])],1)],1),e.form.isFile?o("el-form-item",{attrs:{label:"文件上传"}},[e.form.file?o("span",[e._v(" "+e._s(e.form.file.name)+" "),o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:e.clearFile}})],1):e._e(),o("el-upload",{directives:[{name:"show",rawName:"v-show",value:!e.form.file,expression:"!form.file"}],ref:"upload",staticClass:"upload-demo",attrs:{action:e.baseUrl+"/upload","on-change":e.onChange,"on-success":e.onSuccess,"on-error":e.onError,"auto-upload":!1}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb ")])],1)],1):e._e(),e.form.isFile?e._e():o("el-form-item",{attrs:{label:"URL"}},[o("el-input",{model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")])],1)],1)],1)],1)},i=[],s=(o("c975"),o("b0c0"),o("0fb7"),o("450d"),o("f529")),l=o.n(s),r=o("bc3a"),a=o.n(r),d={data:function(){return{form:{isFile:!0,file:null,url:""}}},computed:{baseUrl:function(){return""}},watch:{"form.isFile":function(){this.form.isFile&&(this.form.file=null,this.$refs.upload.clearFiles())}},methods:{onChange:function(e){e.name.indexOf(".ofd")<0?(this.form.file=null,l.a.error("不是一个OFD文件")):this.form.file=e,this.$refs.upload.clearFiles()},onSuccess:function(e){console.log(e)},onError:function(e){console.log(e)},clearFile:function(){this.form.file=null},onSubmit:function(){this.upload()},upload:function(){var e=this,t=new FormData,o=this.form.file;t.append("file",o.raw),console.log(o),a.a.post(this.baseUrl+"/upload",t,{"Content-Type":"multipart/form-data"}).then((function(t){200===t.status&&(t=t.data,200===t.code?e.$router.push({path:"/viewer",query:{id:t.data}}):l.a.error(t.msg))})).catch((function(e){console.log(e)}))}}},u=d,c=(o("c8de"),o("2877")),f=Object(c["a"])(u,n,i,!1,null,"f618b968",null);t["default"]=f.exports},"41f8":function(e,t,o){"use strict";t.__esModule=!0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isVNode=s;var i=o("8122");function s(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":n(e))&&(0,i.hasOwn)(e,"componentOptions")}},"4b26":function(e,t,o){"use strict";t.__esModule=!0;var n=o("2b0e"),i=l(n),s=o("5924");function l(e){return e&&e.__esModule?e:{default:e}}var r=!1,a=!1,d=void 0,u=function(){if(!i.default.prototype.$isServer){var e=f.modalDom;return e?r=!0:(r=!1,e=document.createElement("div"),f.modalDom=e,e.addEventListener("touchmove",(function(e){e.preventDefault(),e.stopPropagation()})),e.addEventListener("click",(function(){f.doOnModalClick&&f.doOnModalClick()}))),e}},c={},f={modalFade:!0,getInstance:function(e){return c[e]},register:function(e,t){e&&t&&(c[e]=t)},deregister:function(e){e&&(c[e]=null,delete c[e])},nextZIndex:function(){return f.zIndex++},modalStack:[],doOnModalClick:function(){var e=f.modalStack[f.modalStack.length-1];if(e){var t=f.getInstance(e.id);t&&t.closeOnClickModal&&t.close()}},openModal:function(e,t,o,n,l){if(!i.default.prototype.$isServer&&e&&void 0!==t){this.modalFade=l;for(var a=this.modalStack,d=0,c=a.length;d<c;d++){var f=a[d];if(f.id===e)return}var p=u();if((0,s.addClass)(p,"v-modal"),this.modalFade&&!r&&(0,s.addClass)(p,"v-modal-enter"),n){var h=n.trim().split(/\s+/);h.forEach((function(e){return(0,s.addClass)(p,e)}))}setTimeout((function(){(0,s.removeClass)(p,"v-modal-enter")}),200),o&&o.parentNode&&11!==o.parentNode.nodeType?o.parentNode.appendChild(p):document.body.appendChild(p),t&&(p.style.zIndex=t),p.tabIndex=0,p.style.display="",this.modalStack.push({id:e,zIndex:t,modalClass:n})}},closeModal:function(e){var t=this.modalStack,o=u();if(t.length>0){var n=t[t.length-1];if(n.id===e){if(n.modalClass){var i=n.modalClass.trim().split(/\s+/);i.forEach((function(e){return(0,s.removeClass)(o,e)}))}t.pop(),t.length>0&&(o.style.zIndex=t[t.length-1].zIndex)}else for(var l=t.length-1;l>=0;l--)if(t[l].id===e){t.splice(l,1);break}}0===t.length&&(this.modalFade&&(0,s.addClass)(o,"v-modal-leave"),setTimeout((function(){0===t.length&&(o.parentNode&&o.parentNode.removeChild(o),o.style.display="none",f.modalDom=void 0),(0,s.removeClass)(o,"v-modal-leave")}),200))}};Object.defineProperty(f,"zIndex",{configurable:!0,get:function(){return a||(d=d||(i.default.prototype.$ELEMENT||{}).zIndex||2e3,a=!0),d},set:function(e){d=e}});var p=function(){if(!i.default.prototype.$isServer&&f.modalStack.length>0){var e=f.modalStack[f.modalStack.length-1];if(!e)return;var t=f.getInstance(e.id);return t}};i.default.prototype.$isServer||window.addEventListener("keydown",(function(e){if(27===e.keyCode){var t=p();t&&t.closeOnPressEscape&&(t.handleClose?t.handleClose():t.handleAction?t.handleAction("cancel"):t.close())}})),t.default=f},5128:function(e,t,o){"use strict";t.__esModule=!0,t.PopupManager=void 0;var n=o("2b0e"),i=f(n),s=o("7f4d"),l=f(s),r=o("4b26"),a=f(r),d=o("e62d"),u=f(d),c=o("5924");function f(e){return e&&e.__esModule?e:{default:e}}var p=1,h=void 0;t.default={props:{visible:{type:Boolean,default:!1},openDelay:{},closeDelay:{},zIndex:{},modal:{type:Boolean,default:!1},modalFade:{type:Boolean,default:!0},modalClass:{},modalAppendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},beforeMount:function(){this._popupId="popup-"+p++,a.default.register(this._popupId,this)},beforeDestroy:function(){a.default.deregister(this._popupId),a.default.closeModal(this._popupId),this.restoreBodyStyle()},data:function(){return{opened:!1,bodyPaddingRight:null,computedBodyPaddingRight:0,withoutHiddenClass:!0,rendered:!1}},watch:{visible:function(e){var t=this;if(e){if(this._opening)return;this.rendered?this.open():(this.rendered=!0,i.default.nextTick((function(){t.open()})))}else this.close()}},methods:{open:function(e){var t=this;this.rendered||(this.rendered=!0);var o=(0,l.default)({},this.$props||this,e);this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),clearTimeout(this._openTimer);var n=Number(o.openDelay);n>0?this._openTimer=setTimeout((function(){t._openTimer=null,t.doOpen(o)}),n):this.doOpen(o)},doOpen:function(e){if(!this.$isServer&&(!this.willOpen||this.willOpen())&&!this.opened){this._opening=!0;var t=this.$el,o=e.modal,n=e.zIndex;if(n&&(a.default.zIndex=n),o&&(this._closing&&(a.default.closeModal(this._popupId),this._closing=!1),a.default.openModal(this._popupId,a.default.nextZIndex(),this.modalAppendToBody?void 0:t,e.modalClass,e.modalFade),e.lockScroll)){this.withoutHiddenClass=!(0,c.hasClass)(document.body,"el-popup-parent--hidden"),this.withoutHiddenClass&&(this.bodyPaddingRight=document.body.style.paddingRight,this.computedBodyPaddingRight=parseInt((0,c.getStyle)(document.body,"paddingRight"),10)),h=(0,u.default)();var i=document.documentElement.clientHeight<document.body.scrollHeight,s=(0,c.getStyle)(document.body,"overflowY");h>0&&(i||"scroll"===s)&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.computedBodyPaddingRight+h+"px"),(0,c.addClass)(document.body,"el-popup-parent--hidden")}"static"===getComputedStyle(t).position&&(t.style.position="absolute"),t.style.zIndex=a.default.nextZIndex(),this.opened=!0,this.onOpen&&this.onOpen(),this.doAfterOpen()}},doAfterOpen:function(){this._opening=!1},close:function(){var e=this;if(!this.willClose||this.willClose()){null!==this._openTimer&&(clearTimeout(this._openTimer),this._openTimer=null),clearTimeout(this._closeTimer);var t=Number(this.closeDelay);t>0?this._closeTimer=setTimeout((function(){e._closeTimer=null,e.doClose()}),t):this.doClose()}},doClose:function(){this._closing=!0,this.onClose&&this.onClose(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose()},doAfterClose:function(){a.default.closeModal(this._popupId),this._closing=!1},restoreBodyStyle:function(){this.modal&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.bodyPaddingRight,(0,c.removeClass)(document.body,"el-popup-parent--hidden")),this.withoutHiddenClass=!0}}},t.PopupManager=a.default},b0c0:function(e,t,o){var n=o("83ab"),i=o("9bf2").f,s=Function.prototype,l=s.toString,r=/^\s*function ([^ (]*)/,a="name";n&&!(a in s)&&i(s,a,{configurable:!0,get:function(){try{return l.call(this).match(r)[1]}catch(e){return""}}})},c8de:function(e,t,o){"use strict";o("f4d0")},c975:function(e,t,o){"use strict";var n=o("23e7"),i=o("4d64").indexOf,s=o("a640"),l=o("ae40"),r=[].indexOf,a=!!r&&1/[1].indexOf(1,-0)<0,d=s("indexOf"),u=l("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:a||!d||!u},{indexOf:function(e){return a?r.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},e62d:function(e,t,o){"use strict";t.__esModule=!0,t.default=function(){if(i.default.prototype.$isServer)return 0;if(void 0!==l)return l;var e=document.createElement("div");e.className="el-scrollbar__wrap",e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var o=document.createElement("div");o.style.width="100%",e.appendChild(o);var n=o.offsetWidth;return e.parentNode.removeChild(e),l=t-n,l};var n=o("2b0e"),i=s(n);function s(e){return e&&e.__esModule?e:{default:e}}var l=void 0},f4d0:function(e,t,o){},f529:function(e,t,o){e.exports=function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/dist/",o(o.s=75)}({0:function(e,t,o){"use strict";function n(e,t,o,n,i,s,l,r){var a,d="function"===typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=o,d._compiled=!0),n&&(d.functional=!0),s&&(d._scopeId="data-v-"+s),l?(a=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},d._ssrRegister=a):i&&(a=r?function(){i.call(this,this.$root.$options.shadowRoot)}:i),a)if(d.functional){d._injectStyles=a;var u=d.render;d.render=function(e,t){return a.call(t),u(e,t)}}else{var c=d.beforeCreate;d.beforeCreate=c?[].concat(c,a):[a]}return{exports:e,options:d}}o.d(t,"a",(function(){return n}))},15:function(e,t){e.exports=o("5128")},23:function(e,t){e.exports=o("41f8")},7:function(e,t){e.exports=o("2b0e")},75:function(e,t,o){"use strict";o.r(t);var n=o(7),i=o.n(n),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("transition",{attrs:{name:"el-message-fade"},on:{"after-leave":e.handleAfterLeave}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:["el-message",e.type&&!e.iconClass?"el-message--"+e.type:"",e.center?"is-center":"",e.showClose?"is-closable":"",e.customClass],style:e.positionStyle,attrs:{role:"alert"},on:{mouseenter:e.clearTimer,mouseleave:e.startTimer}},[e.iconClass?o("i",{class:e.iconClass}):o("i",{class:e.typeClass}),e._t("default",[e.dangerouslyUseHTMLString?o("p",{staticClass:"el-message__content",domProps:{innerHTML:e._s(e.message)}}):o("p",{staticClass:"el-message__content"},[e._v(e._s(e.message))])]),e.showClose?o("i",{staticClass:"el-message__closeBtn el-icon-close",on:{click:e.close}}):e._e()],2)])},l=[];s._withStripped=!0;var r={success:"success",info:"info",warning:"warning",error:"error"},a={data:function(){return{visible:!1,message:"",duration:3e3,type:"info",iconClass:"",customClass:"",onClose:null,showClose:!1,closed:!1,verticalOffset:20,timer:null,dangerouslyUseHTMLString:!1,center:!1}},computed:{typeClass:function(){return this.type&&!this.iconClass?"el-message__icon el-icon-"+r[this.type]:""},positionStyle:function(){return{top:this.verticalOffset+"px"}}},watch:{closed:function(e){e&&(this.visible=!1)}},methods:{handleAfterLeave:function(){this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},close:function(){this.closed=!0,"function"===typeof this.onClose&&this.onClose(this)},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration))},keydown:function(e){27===e.keyCode&&(this.closed||this.close())}},mounted:function(){this.startTimer(),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},d=a,u=o(0),c=Object(u["a"])(d,s,l,!1,null,null,null);c.options.__file="packages/message/src/main.vue";var f=c.exports,p=o(15),h=o(23),m=i.a.extend(f),v=void 0,y=[],g=1,_=function e(t){if(!i.a.prototype.$isServer){t=t||{},"string"===typeof t&&(t={message:t});var o=t.onClose,n="message_"+g++;t.onClose=function(){e.close(n,o)},v=new m({data:t}),v.id=n,Object(h["isVNode"])(v.message)&&(v.$slots.default=[v.message],v.message=null),v.$mount(),document.body.appendChild(v.$el);var s=t.offset||20;return y.forEach((function(e){s+=e.$el.offsetHeight+16})),v.verticalOffset=s,v.visible=!0,v.$el.style.zIndex=p["PopupManager"].nextZIndex(),y.push(v),v}};["success","warning","info","error"].forEach((function(e){_[e]=function(t){return"string"===typeof t&&(t={message:t}),t.type=e,_(t)}})),_.close=function(e,t){for(var o=y.length,n=-1,i=void 0,s=0;s<o;s++)if(e===y[s].id){i=y[s].$el.offsetHeight,n=s,"function"===typeof t&&t(y[s]),y.splice(s,1);break}if(!(o<=1||-1===n||n>y.length-1))for(var l=n;l<o-1;l++){var r=y[l].$el;r.style["top"]=parseInt(r.style["top"],10)-i-16+"px"}},_.closeAll=function(){for(var e=y.length-1;e>=0;e--)y[e].close()};var b=_;t["default"]=b}})}}]);
//# sourceMappingURL=chunk-8f7fa47a.f646b062.js.map